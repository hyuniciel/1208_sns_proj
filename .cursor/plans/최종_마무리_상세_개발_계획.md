# 최종 마무리 상세 개발 계획

## 개요

프로젝트의 최종 마무리 작업을 수행하여 프로덕션 배포 준비를 완료합니다.

**참고 문서:**
- `docs/PRD.md` - 섹션 12: 1차 MVP 제외 기능, 섹션 13: 참고 자료
- `docs/TODO.md` - 섹션 13: 최종 마무리
- `supabase/migrations/db.sql` - 데이터베이스 스키마

---

## 1. 모바일/태블릿 반응형 테스트

### 1-1. 테스트 체크리스트 작성

**목적:** 모든 화면 크기에서 기능이 정상 작동하는지 확인

**테스트 항목:**

#### Mobile (< 768px)
- [ ] Header 표시 확인
- [ ] BottomNav 표시 확인
- [ ] Sidebar 숨김 확인
- [ ] PostCard 전체 너비 확인
- [ ] PostModal 전체 페이지 전환 확인
- [ ] 프로필 페이지 레이아웃 확인
- [ ] 터치 인터랙션 테스트
  - [ ] 더블탭 좋아요
  - [ ] 스와이프 제스처
  - [ ] 버튼 터치 영역 (최소 44px)
- [ ] 키보드 입력 테스트
  - [ ] 댓글 입력
  - [ ] 게시물 작성

#### Tablet (768px ~ 1023px)
- [ ] Icon-only Sidebar (72px) 표시 확인
- [ ] PostCard 최대 너비 (630px) 확인
- [ ] 프로필 페이지 레이아웃 확인
- [ ] PostModal 레이아웃 확인
- [ ] 터치 인터랙션 테스트

#### Desktop (1024px+)
- [ ] Full Sidebar (244px) 표시 확인
- [ ] PostCard 최대 너비 (630px) 확인
- [ ] PostModal 모달 형식 확인
- [ ] 프로필 페이지 레이아웃 확인
- [ ] 마우스 호버 효과 확인

**파일:**
- 테스트 체크리스트 문서 생성 (선택적)
- 또는 직접 테스트 수행

---

### 1-2. 실제 디바이스 테스트

**목적:** 실제 디바이스에서 사용자 경험 확인

**테스트 방법:**
1. Chrome DevTools의 Device Toolbar 사용
2. 실제 모바일 디바이스에서 테스트 (선택적)
3. 다양한 브라우저 테스트

**확인 사항:**
- 레이아웃 깨짐 없음
- 텍스트 가독성
- 버튼 클릭 가능성
- 이미지 로딩 속도
- 애니메이션 성능

---

## 2. 접근성 검토

### 2-1. 키보드 네비게이션

**목적:** 키보드만으로 모든 기능 사용 가능하도록

**확인 항목:**

#### 포커스 관리
- [ ] 모든 인터랙티브 요소에 포커스 가능
- [ ] 포커스 순서가 논리적
- [ ] 포커스 표시가 명확함 (focus-visible)
- [ ] 모달 열릴 때 포커스가 모달로 이동
- [ ] 모달 닫힐 때 포커스가 원래 위치로 복귀

#### 키보드 단축키
- [ ] Tab: 다음 요소로 이동
- [ ] Shift + Tab: 이전 요소로 이동
- [ ] Enter/Space: 버튼 활성화
- [ ] ESC: 모달 닫기
- [ ] ← →: PostModal 네비게이션 (Desktop)

**확인 대상 컴포넌트:**
- `Sidebar.tsx`
- `BottomNav.tsx`
- `PostCard.tsx`
- `PostModal.tsx`
- `CreatePostModal.tsx`
- `CommentForm.tsx`
- `FollowButton.tsx`
- `LikeButton.tsx`
- `ProfileHeader.tsx`

**파일:**
- 각 컴포넌트 확인 및 수정

---

### 2-2. ARIA 레이블 및 속성

**목적:** 스크린 리더 사용자를 위한 접근성 향상

**확인 항목:**

#### 필수 ARIA 속성
- [ ] 버튼: `aria-label` 또는 명확한 텍스트
- [ ] 이미지: `alt` 속성
- [ ] 모달: `aria-labelledby`, `aria-describedby`
- [ ] 폼 입력: `aria-label`, `aria-required`, `aria-invalid`
- [ ] 상태 표시: `aria-live`, `aria-busy`

#### 시맨틱 HTML
- [ ] 적절한 HTML 태그 사용 (`<button>`, `<nav>`, `<main>`, `<article>`)
- [ ] 헤딩 계층 구조 (`h1`, `h2`, `h3`)

**확인 대상 컴포넌트:**
- 모든 버튼 컴포넌트
- 모든 이미지 컴포넌트
- 모든 모달 컴포넌트
- 모든 폼 컴포넌트

**파일:**
- 각 컴포넌트 확인 및 수정

---

### 2-3. 색상 대비

**목적:** WCAG 2.1 AA 준수 (4.5:1 최소 비율)

**확인 항목:**
- [ ] 텍스트와 배경 색상 대비
- [ ] 버튼 텍스트와 배경 색상 대비
- [ ] 링크 색상과 배경 색상 대비
- [ ] 에러 메시지 색상 대비

**확인 방법:**
- 브라우저 확장 프로그램 사용 (예: WAVE, axe DevTools)
- 또는 수동 확인

**파일:**
- `app/globals.css` (색상 변수 확인)

---

### 2-4. 스크린 리더 테스트

**목적:** 스크린 리더 사용자 경험 확인

**테스트 방법:**
- 브라우저 내장 스크린 리더 사용 (선택적)
- 또는 접근성 검사 도구 사용

**확인 사항:**
- [ ] 모든 콘텐츠가 읽힘
- [ ] 버튼 목적이 명확함
- [ ] 폼 입력이 명확함
- [ ] 에러 메시지가 읽힘

---

## 3. 코드 정리

### 3-1. 불필요한 주석 제거

**목적:** 코드 가독성 향상

**확인 항목:**
- [ ] TODO 주석 제거 또는 해결
- [ ] 사용하지 않는 주석 제거
- [ ] 중복 주석 제거
- [ ] 오래된 주석 업데이트

**파일:**
- 모든 컴포넌트 파일
- 모든 API 라우트 파일

---

### 3-2. 코드 포맷팅

**목적:** 일관된 코드 스타일 유지

**확인 항목:**
- [ ] Prettier 설정 확인
- [ ] 모든 파일 포맷팅 적용
- [ ] 들여쓰기 일관성
- [ ] 따옴표 일관성 (single/double)
- [ ] 세미콜론 일관성

**실행 방법:**
```bash
# Prettier 포맷팅
pnpm format

# 또는 ESLint 자동 수정
pnpm lint --fix
```

**파일:**
- `.prettierrc` 확인
- `eslint.config.mjs` 확인

---

### 3-3. 사용하지 않는 코드 제거

**목적:** 코드베이스 정리

**확인 항목:**
- [ ] 사용하지 않는 import 제거
- [ ] 사용하지 않는 변수 제거
- [ ] 사용하지 않는 함수 제거
- [ ] 사용하지 않는 파일 제거

**도구:**
- ESLint의 `no-unused-vars` 규칙
- TypeScript 컴파일러 경고

---

### 3-4. 타입 안정성 확인

**목적:** TypeScript 타입 에러 제거

**확인 항목:**
- [ ] 모든 타입 에러 해결
- [ ] `any` 타입 최소화
- [ ] 타입 정의 명확성

**실행 방법:**
```bash
# TypeScript 타입 체크
pnpm tsc --noEmit
```

---

## 4. 배포 준비

### 4-1. 환경 변수 설정

**목적:** 프로덕션 환경 변수 확인

**확인 항목:**

#### 필수 환경 변수
- [ ] `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY`
- [ ] `CLERK_SECRET_KEY`
- [ ] `NEXT_PUBLIC_CLERK_SIGN_IN_URL`
- [ ] `NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL`
- [ ] `NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL`
- [ ] `NEXT_PUBLIC_SUPABASE_URL`
- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- [ ] `SUPABASE_SERVICE_ROLE_KEY`
- [ ] `NEXT_PUBLIC_STORAGE_BUCKET`

#### 환경 변수 문서화
- [ ] `.env.example` 파일 확인/생성
- [ ] README.md에 환경 변수 설명 추가

**파일:**
- `.env.example` (확인/생성)
- `README.md` (확인/업데이트)

---

### 4-2. Vercel 배포 설정

**목적:** Vercel에 배포하기 위한 설정

**확인 항목:**

#### Vercel 프로젝트 설정
- [ ] Vercel 프로젝트 생성
- [ ] Git 저장소 연결
- [ ] 환경 변수 설정 (Vercel 대시보드)
- [ ] 빌드 설정 확인
  - [ ] Build Command: `pnpm build`
  - [ ] Output Directory: `.next`
  - [ ] Install Command: `pnpm install`

#### Vercel 설정 파일 (선택적)
- [ ] `vercel.json` 파일 생성 (필요 시)
- [ ] 리다이렉트 규칙 설정
- [ ] 헤더 설정

**파일:**
- `vercel.json` (선택적)

---

### 4-3. 프로덕션 빌드 테스트

**목적:** 프로덕션 빌드가 정상적으로 작동하는지 확인

**테스트 항목:**

#### 로컬 프로덕션 빌드
```bash
# 프로덕션 빌드
pnpm build

# 프로덕션 서버 실행
pnpm start
```

**확인 사항:**
- [ ] 빌드 성공 (에러 없음)
- [ ] 빌드 경고 확인 및 해결
- [ ] 프로덕션 서버 정상 실행
- [ ] 모든 페이지 접근 가능
- [ ] API 라우트 정상 작동
- [ ] 이미지 로딩 정상
- [ ] 환경 변수 정상 로드

#### 빌드 최적화 확인
- [ ] 번들 크기 확인
- [ ] 이미지 최적화 확인
- [ ] 코드 스플리팅 확인

---

### 4-4. Supabase 프로덕션 설정

**목적:** 프로덕션 환경에서 Supabase 정상 작동 확인

**확인 항목:**

#### 데이터베이스
- [ ] 프로덕션 데이터베이스 마이그레이션 적용
- [ ] RLS 정책 검토 (프로덕션에서는 활성화 권장)
- [ ] 인덱스 확인

#### Storage
- [ ] Storage 버킷 생성 확인
- [ ] Storage 권한 설정 확인
- [ ] CORS 설정 확인 (필요 시)

#### 환경 변수
- [ ] 프로덕션 Supabase URL 확인
- [ ] 프로덕션 Supabase 키 확인

---

### 4-5. Clerk 프로덕션 설정

**목적:** 프로덕션 환경에서 Clerk 정상 작동 확인

**확인 항목:**

#### Clerk 대시보드 설정
- [ ] 프로덕션 환경 생성
- [ ] Redirect URLs 설정
  - [ ] Allowed redirect URLs
  - [ ] Sign-in fallback redirect URL
  - [ ] Sign-up fallback redirect URL
- [ ] 환경 변수 확인

---

### 4-6. 성능 최적화 확인

**목적:** 프로덕션 성능 최적화

**확인 항목:**

#### Lighthouse 점수 확인
- [ ] Performance: 80+
- [ ] Accessibility: 90+
- [ ] Best Practices: 90+
- [ ] SEO: 80+

#### 최적화 항목
- [ ] 이미지 최적화 (Next.js Image 사용)
- [ ] 코드 스플리팅
- [ ] 번들 크기 최적화
- [ ] 캐싱 전략

**도구:**
- Chrome DevTools Lighthouse
- Vercel Analytics (선택적)

---

## 5. 문서화

### 5-1. README.md 업데이트

**목적:** 프로젝트 문서화

**작성 내용:**

#### 필수 섹션
- [ ] 프로젝트 소개
- [ ] 기술 스택
- [ ] 설치 방법
- [ ] 환경 변수 설정
- [ ] 실행 방법
- [ ] 배포 방법
- [ ] 주요 기능
- [ ] 프로젝트 구조

**파일:**
- `README.md` (확인/업데이트)

---

### 5-2. API 문서화 (선택적)

**목적:** API 엔드포인트 문서화

**작성 내용:**
- [ ] API 엔드포인트 목록
- [ ] 요청/응답 형식
- [ ] 인증 방법
- [ ] 에러 코드

**파일:**
- `docs/API.md` (선택적)

---

## 6. 보안 검토

### 6-1. 보안 체크리스트

**목적:** 보안 취약점 확인

**확인 항목:**

#### 인증 및 권한
- [ ] 모든 API 라우트에서 인증 확인
- [ ] 소유권 검증 (본인만 수정/삭제 가능)
- [ ] 환경 변수 노출 방지

#### 입력 검증
- [ ] 파일 업로드 검증 (크기, 타입)
- [ ] 텍스트 입력 검증 (길이, XSS 방지)
- [ ] SQL 인젝션 방지 (Supabase 사용으로 자동 방지)

#### 기타
- [ ] CORS 설정 확인
- [ ] Rate limiting 고려 (선택적)
- [ ] HTTPS 사용

---

## 7. 구현 순서

1. **모바일/태블릿 반응형 테스트**
   - 테스트 체크리스트 작성
   - 각 화면 크기별 테스트 수행
   - 문제점 수정

2. **접근성 검토**
   - 키보드 네비게이션 확인 및 수정
   - ARIA 레이블 추가
   - 색상 대비 확인
   - 스크린 리더 테스트 (선택적)

3. **코드 정리**
   - 불필요한 주석 제거
   - 코드 포맷팅
   - 사용하지 않는 코드 제거
   - 타입 안정성 확인

4. **환경 변수 설정**
   - `.env.example` 확인/생성
   - README.md 업데이트

5. **Vercel 배포 설정**
   - Vercel 프로젝트 생성
   - 환경 변수 설정
   - 빌드 설정 확인

6. **프로덕션 빌드 테스트**
   - 로컬 프로덕션 빌드
   - 빌드 최적화 확인

7. **Supabase 프로덕션 설정**
   - 데이터베이스 마이그레이션
   - Storage 설정 확인

8. **Clerk 프로덕션 설정**
   - Redirect URLs 설정
   - 환경 변수 확인

9. **성능 최적화 확인**
   - Lighthouse 점수 확인
   - 최적화 항목 확인

10. **문서화**
    - README.md 업데이트
    - API 문서화 (선택적)

11. **보안 검토**
    - 보안 체크리스트 확인
    - 취약점 수정

---

## 8. 주의사항

1. **환경 변수 보안**
   - `.env` 파일을 Git에 커밋하지 않음
   - `.gitignore` 확인
   - Vercel 대시보드에서 환경 변수 설정

2. **프로덕션 데이터**
   - 프로덕션 데이터베이스 백업 고려
   - 마이그레이션 전 테스트

3. **RLS 정책**
   - 프로덕션에서는 RLS 활성화 권장
   - 적절한 정책 작성 필요

4. **성능 모니터링**
   - Vercel Analytics 고려 (선택적)
   - 에러 모니터링 도구 고려 (선택적)

5. **점진적 배포**
   - 처음에는 소규모 테스트
   - 문제 없으면 전체 배포

---

## 9. 참고 파일

- `package.json` - 프로젝트 설정 및 스크립트
- `.env.example` - 환경 변수 예시 (확인/생성)
- `README.md` - 프로젝트 문서 (확인/업데이트)
- `vercel.json` - Vercel 설정 (선택적)
- `.gitignore` - Git 제외 파일 확인
- `tsconfig.json` - TypeScript 설정
- `next.config.js` 또는 `next.config.ts` - Next.js 설정

---

## 10. 완료 체크리스트

### 모바일/태블릿 반응형 테스트
- [ ] Mobile (< 768px) 테스트 완료
- [ ] Tablet (768px ~ 1023px) 테스트 완료
- [ ] Desktop (1024px+) 테스트 완료
- [ ] 터치 인터랙션 테스트 완료
- [ ] 문제점 수정 완료

### 접근성 검토
- [ ] 키보드 네비게이션 확인 및 수정 완료
- [ ] ARIA 레이블 추가 완료
- [ ] 색상 대비 확인 완료
- [ ] 스크린 리더 테스트 완료 (선택적)

### 코드 정리
- [ ] 불필요한 주석 제거 완료
- [ ] 코드 포맷팅 완료
- [ ] 사용하지 않는 코드 제거 완료
- [ ] 타입 안정성 확인 완료

### 환경 변수 설정
- [ ] `.env.example` 확인/생성 완료
- [ ] README.md 업데이트 완료

### Vercel 배포 설정
- [ ] Vercel 프로젝트 생성 완료
- [ ] 환경 변수 설정 완료
- [ ] 빌드 설정 확인 완료

### 프로덕션 빌드 테스트
- [ ] 로컬 프로덕션 빌드 성공
- [ ] 프로덕션 서버 정상 실행
- [ ] 모든 기능 정상 작동 확인
- [ ] 빌드 최적화 확인 완료

### Supabase 프로덕션 설정
- [ ] 데이터베이스 마이그레이션 적용 완료
- [ ] Storage 설정 확인 완료
- [ ] 환경 변수 확인 완료

### Clerk 프로덕션 설정
- [ ] Redirect URLs 설정 완료
- [ ] 환경 변수 확인 완료

### 성능 최적화 확인
- [ ] Lighthouse 점수 확인 완료
- [ ] 최적화 항목 확인 완료

### 문서화
- [ ] README.md 업데이트 완료
- [ ] API 문서화 완료 (선택적)

### 보안 검토
- [ ] 보안 체크리스트 확인 완료
- [ ] 취약점 수정 완료

---

## 11. 배포 후 확인 사항

배포 후 다음 사항들을 확인해야 합니다:

1. **기능 확인**
   - [ ] 회원가입/로그인 정상 작동
   - [ ] 게시물 작성/조회/삭제 정상 작동
   - [ ] 좋아요 기능 정상 작동
   - [ ] 댓글 작성/삭제 정상 작동
   - [ ] 프로필 페이지 정상 작동
   - [ ] 팔로우 기능 정상 작동

2. **성능 확인**
   - [ ] 페이지 로딩 속도
   - [ ] 이미지 로딩 속도
   - [ ] API 응답 속도

3. **에러 모니터링**
   - [ ] 콘솔 에러 확인
   - [ ] 네트워크 에러 확인
   - [ ] 서버 에러 확인

4. **사용자 피드백**
   - [ ] 사용자 테스트
   - [ ] 피드백 수집
   - [ ] 문제점 수정

