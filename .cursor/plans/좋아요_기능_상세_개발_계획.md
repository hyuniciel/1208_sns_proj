# 좋아요 기능 상세 개발 계획

## 개요

Instagram 스타일의 좋아요 기능을 구현합니다. 사용자가 게시물에 좋아요를 추가/제거할 수 있으며, 클릭 애니메이션과 더블탭 좋아요 기능을 포함합니다.

**참고 문서:**
- [docs/PRD.md](../docs/PRD.md) - 좋아요 기능 정의 (278-283줄, 313-327줄)
- [supabase/migrations/db.sql](../supabase/migrations/db.sql) - likes 테이블 스키마 (63-86줄)
- [docs/TODO.md](../docs/TODO.md) - 좋아요 기능 TODO (87-99줄)

---

## 1. API Route 생성: 좋아요 추가/제거

### 1.1 `app/api/likes/route.ts` 생성

**기능:**
- POST: 좋아요 추가
- DELETE: 좋아요 제거
- 인증 검증 (Clerk)
- 중복 좋아요 방지 (DB 제약조건 활용)
- 에러 처리 및 로깅

**구현 세부사항:**

#### POST 핸들러 (좋아요 추가)

**요청 형식:**
```typescript
POST /api/likes
Content-Type: application/json

{
  "post_id": "uuid-string"
}
```

**처리 단계:**

1. **인증 확인**
   - Clerk `auth()`로 현재 사용자 확인
   - 인증되지 않은 경우 401 Unauthorized 반환
   ```typescript
   const { userId: clerkUserId } = await auth();
   if (!clerkUserId) {
     return NextResponse.json(
       { error: "Unauthorized" },
       { status: 401 }
     );
   }
   ```

2. **요청 본문 파싱**
   - `post_id`: 좋아요를 추가할 게시물 ID (UUID)
   - 필수 필드 검증
   ```typescript
   const body = await request.json();
   const { post_id } = body;
   
   if (!post_id || typeof post_id !== 'string') {
     return NextResponse.json(
       { error: "post_id is required" },
       { status: 400 }
     );
   }
   ```

3. **사용자 ID 조회**
   - Clerk `userId`로 Supabase `users` 테이블에서 사용자 UUID 조회
   - 사용자가 존재하지 않으면 404 Not Found 반환
   ```typescript
   const supabase = createClerkSupabaseClient();
   const { data: user, error: userError } = await supabase
     .from("users")
     .select("id")
     .eq("clerk_id", clerkUserId)
     .single();
   
   if (userError || !user) {
     return NextResponse.json(
       { error: "User not found" },
       { status: 404 }
     );
   }
   ```

4. **게시물 존재 확인**
   - `posts` 테이블에서 `post_id` 확인
   - 존재하지 않으면 404 Not Found 반환
   ```typescript
   const { data: post, error: postError } = await supabase
     .from("posts")
     .select("id")
     .eq("id", post_id)
     .single();
   
   if (postError || !post) {
     return NextResponse.json(
       { error: "Post not found" },
       { status: 404 }
     );
   }
   ```

5. **중복 좋아요 확인 (선택적)**
   - `likes` 테이블에서 `(post_id, user_id)` 조합 확인
   - 이미 좋아요가 있으면 409 Conflict 반환 (또는 무시하고 성공 반환)
   ```typescript
   const { data: existingLike } = await supabase
     .from("likes")
     .select("id")
     .eq("post_id", post_id)
     .eq("user_id", user.id)
     .single();
   
   if (existingLike) {
     return NextResponse.json(
       { error: "Already liked", like: existingLike },
       { status: 409 }
     );
   }
   ```

6. **좋아요 추가**
   - `likes` 테이블에 레코드 삽입
   - DB 제약조건 (`UNIQUE(post_id, user_id)`)으로 중복 방지
   ```typescript
   const { data: like, error: insertError } = await supabase
     .from("likes")
     .insert({
       post_id,
       user_id: user.id,
     })
     .select()
     .single();
   
   if (insertError) {
     // UNIQUE 제약조건 위반 시 409 반환
     if (insertError.code === '23505') {
       return NextResponse.json(
         { error: "Already liked" },
         { status: 409 }
       );
     }
     return NextResponse.json(
       { error: "Failed to add like", details: insertError.message },
       { status: 500 }
     );
   }
   ```

7. **응답 반환**
   ```typescript
   return NextResponse.json({
     success: true,
     like: {
       id: like.id,
       post_id: like.post_id,
       user_id: like.user_id,
       created_at: like.created_at,
     }
   }, { status: 201 });
   ```

#### DELETE 핸들러 (좋아요 제거)

**요청 형식:**
```typescript
DELETE /api/likes
Content-Type: application/json

{
  "post_id": "uuid-string"
}
```

**처리 단계:**

1. **인증 확인** (POST와 동일)

2. **요청 본문 파싱**
   ```typescript
   const body = await request.json();
   const { post_id } = body;
   
   if (!post_id || typeof post_id !== 'string') {
     return NextResponse.json(
       { error: "post_id is required" },
       { status: 400 }
     );
   }
   ```

3. **사용자 ID 조회** (POST와 동일)

4. **좋아요 존재 확인**
   - `likes` 테이블에서 해당 좋아요 조회
   - 존재하지 않으면 404 Not Found 반환
   ```typescript
   const { data: like, error: likeError } = await supabase
     .from("likes")
     .select("id")
     .eq("post_id", post_id)
     .eq("user_id", user.id)
     .single();
   
   if (likeError || !like) {
     return NextResponse.json(
       { error: "Like not found" },
       { status: 404 }
     );
   }
   ```

5. **좋아요 제거**
   ```typescript
   const { error: deleteError } = await supabase
     .from("likes")
     .delete()
     .eq("post_id", post_id)
     .eq("user_id", user.id);
   
   if (deleteError) {
     return NextResponse.json(
       { error: "Failed to remove like", details: deleteError.message },
       { status: 500 }
     );
   }
   ```

6. **응답 반환**
   ```typescript
   return NextResponse.json({
     success: true,
     message: "Like removed"
   });
   ```

**에러 처리:**
- 인증 실패: 401 Unauthorized
- 잘못된 요청: 400 Bad Request
- 리소스 없음: 404 Not Found
- 중복 좋아요: 409 Conflict
- 데이터베이스 에러: 500 Internal Server Error

**전체 코드 구조:**
```typescript
/**
 * @file route.ts
 * @description 좋아요 API Route
 *
 * 좋아요 추가/제거 API를 제공합니다.
 * - POST: 좋아요 추가
 * - DELETE: 좋아요 제거
 * - 인증 검증 (Clerk)
 * - 중복 좋아요 방지
 *
 * @see docs/PRD.md - 좋아요 기능 정의
 */

import { NextRequest, NextResponse } from "next/server";
import { auth } from "@clerk/nextjs/server";
import { createClerkSupabaseClient } from "@/lib/supabase/server";
import type { Like } from "@/lib/types";

export async function POST(request: NextRequest) {
  try {
    console.group("POST /api/likes");
    
    // 1. 인증 확인
    // 2. 요청 본문 파싱
    // 3. 사용자 ID 조회
    // 4. 게시물 존재 확인
    // 5. 중복 좋아요 확인
    // 6. 좋아요 추가
    // 7. 응답 반환
    
    console.groupEnd();
  } catch (error) {
    console.error("❌ POST /api/likes 에러:", error);
    return NextResponse.json(
      { error: "Internal server error" },
      { status: 500 }
    );
  }
}

export async function DELETE(request: NextRequest) {
  try {
    console.group("DELETE /api/likes");
    
    // 1. 인증 확인
    // 2. 요청 본문 파싱
    // 3. 사용자 ID 조회
    // 4. 좋아요 존재 확인
    // 5. 좋아요 제거
    // 6. 응답 반환
    
    console.groupEnd();
  } catch (error) {
    console.error("❌ DELETE /api/likes 에러:", error);
    return NextResponse.json(
      { error: "Internal server error" },
      { status: 500 }
    );
  }
}
```

---

## 2. LikeButton 컴포넌트 생성

### 2.1 `components/post/LikeButton.tsx` 생성

**기능:**
- 빈 하트 ↔ 빨간 하트 상태 관리
- 클릭 애니메이션 (scale 1.3 → 1, 0.15초)
- 더블탭 좋아요 (모바일, 큰 하트 fade in/out, 1초)
- API 호출 및 상태 업데이트
- 로딩 상태 관리
- Optimistic Update (즉시 UI 업데이트 후 API 호출)

**Props 타입:**
```typescript
interface LikeButtonProps {
  postId: string;
  initialLiked: boolean;
  initialLikesCount: number;
  onLikeChange?: (liked: boolean, newCount: number) => void;
  showCount?: boolean; // 좋아요 수 표시 여부 (PostCard에서 처리)
  size?: "sm" | "md" | "lg"; // 아이콘 크기
  enableDoubleTap?: boolean; // 더블탭 활성화 여부 (모바일)
}
```

**상태 관리:**
- `liked`: 현재 좋아요 상태
- `likesCount`: 좋아요 수
- `isAnimating`: 클릭 애니메이션 중인지
- `isDoubleTapAnimating`: 더블탭 애니메이션 중인지
- `isLoading`: API 호출 중인지

**구현 세부사항:**

#### 1. 하트 아이콘
- `liked` 상태에 따라 `Heart` (빈) 또는 `Heart` (채워진) 표시
- 빨간색: `#ed4956` (`--like` 변수)
- 크기: 기본 24px, props로 조정 가능

#### 2. 클릭 핸들러
- 클릭 시 즉시 UI 업데이트 (Optimistic Update)
- API 호출 (`/api/likes` POST 또는 DELETE)
- 성공 시 상태 유지, 실패 시 롤백

#### 3. 클릭 애니메이션
- 클릭 시 `scale(1.3)` → `scale(1)` (0.15초)
- CSS transition 사용
- `isAnimating` 상태로 애니메이션 중 중복 클릭 방지

#### 4. 더블탭 좋아요 (모바일)
- 이미지 영역에서 더블탭 감지 (PostCard에서 처리)
- 큰 하트 아이콘 표시 (중앙, 80px)
- `fade in` (0.2초) → `fade out` (0.8초)
- 애니메이션 중에는 클릭 이벤트 무시

#### 5. 로딩 상태
- API 호출 중에는 버튼 비활성화 또는 스피너 표시
- 에러 발생 시 토스트 메시지 (선택적)

**코드 구조:**
```typescript
/**
 * @file LikeButton.tsx
 * @description 좋아요 버튼 컴포넌트
 *
 * Instagram 스타일의 좋아요 버튼을 렌더링합니다.
 * 클릭 애니메이션과 더블탭 좋아요 기능을 포함합니다.
 *
 * @see docs/PRD.md - 좋아요 기능 정의
 */

'use client';

import { useState, useCallback } from 'react';
import { Heart } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { cn } from '@/lib/utils';

interface LikeButtonProps {
  postId: string;
  initialLiked: boolean;
  initialLikesCount: number;
  onLikeChange?: (liked: boolean, newCount: number) => void;
  showCount?: boolean;
  size?: "sm" | "md" | "lg";
  enableDoubleTap?: boolean;
}

export default function LikeButton({
  postId,
  initialLiked,
  initialLikesCount,
  onLikeChange,
  size = 'md',
  enableDoubleTap = false,
}: LikeButtonProps) {
  const [liked, setLiked] = useState(initialLiked);
  const [likesCount, setLikesCount] = useState(initialLikesCount);
  const [isAnimating, setIsAnimating] = useState(false);
  const [isDoubleTapAnimating, setIsDoubleTapAnimating] = useState(false);
  const [isLoading, setIsLoading] = useState(false);

  const handleClick = useCallback(async () => {
    if (isLoading || isAnimating) return;

    // Optimistic Update
    const previousLiked = liked;
    const previousCount = likesCount;
    setLiked(!liked);
    setLikesCount(liked ? likesCount - 1 : likesCount + 1);
    setIsAnimating(true);

    try {
      setIsLoading(true);
      const response = await fetch('/api/likes', {
        method: liked ? 'DELETE' : 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ post_id: postId }),
      });

      if (!response.ok) {
        // 롤백
        setLiked(previousLiked);
        setLikesCount(previousCount);
        const error = await response.json();
        console.error('좋아요 실패:', error);
        // TODO: 토스트 메시지 표시
      } else {
        const data = await response.json();
        onLikeChange?.(!previousLiked, liked ? previousCount - 1 : previousCount + 1);
      }
    } catch (error) {
      // 롤백
      setLiked(previousLiked);
      setLikesCount(previousCount);
      console.error('좋아요 에러:', error);
      // TODO: 토스트 메시지 표시
    } finally {
      setIsLoading(false);
      setTimeout(() => setIsAnimating(false), 150);
    }
  }, [postId, liked, likesCount, isLoading, isAnimating, onLikeChange]);

  const handleDoubleTap = useCallback(async () => {
    if (isLoading || isDoubleTapAnimating || liked) return;

    setIsDoubleTapAnimating(true);
    await handleClick();
    
    setTimeout(() => {
      setIsDoubleTapAnimating(false);
    }, 1000);
  }, [liked, isLoading, isDoubleTapAnimating, handleClick]);

  // 외부에서 더블탭 호출 가능하도록 expose
  // (PostCard에서 사용)
  if (typeof window !== 'undefined') {
    (window as any)[`likeButton_${postId}`] = { handleDoubleTap };
  }

  const iconSize = {
    sm: 'w-5 h-5',
    md: 'w-6 h-6',
    lg: 'w-8 h-8',
  }[size];

  return (
    <>
      <Button
        variant="ghost"
        size="sm"
        className={cn(
          "p-0 hover:bg-transparent transition-transform duration-150",
          isAnimating && "scale-[1.3]"
        )}
        onClick={handleClick}
        disabled={isLoading}
      >
        <Heart
          className={cn(
            iconSize,
            "transition-colors",
            liked ? 'fill-like text-like' : 'text-text-primary'
          )}
        />
      </Button>

      {/* 더블탭 애니메이션 오버레이 (PostCard에서 렌더링) */}
      {enableDoubleTap && isDoubleTapAnimating && (
        <div
          className={cn(
            "absolute inset-0 flex items-center justify-center pointer-events-none",
            "transition-opacity duration-200",
            isDoubleTapAnimating ? "opacity-100" : "opacity-0"
          )}
        >
          <Heart className="w-20 h-20 fill-like text-like animate-pulse" />
        </div>
      )}
    </>
  );
}
```

**스타일링:**
- 클릭 애니메이션: `transition-transform duration-150`
- 더블탭 애니메이션: `transition-opacity duration-200` (fade in), `duration-800` (fade out)
- 호버 효과: `hover:opacity-80`
- 비활성화: `disabled:opacity-50 disabled:cursor-not-allowed`

---

## 3. PostCard에 LikeButton 통합

### 3.1 `components/post/PostCard.tsx` 업데이트

**변경 사항:**

1. **LikeButton 통합**
   - 액션 버튼 영역에 LikeButton 추가
   - `initialLiked` prop에 `post.is_liked` 전달
   - `initialLikesCount` prop에 `post.likes_count` 전달

2. **더블탭 좋아요 구현**
   - 이미지 영역에 더블탭 이벤트 리스너 추가
   - 모바일에서만 활성화 (또는 항상 활성화)
   - 더블탭 시 LikeButton의 `handleDoubleTap` 호출

3. **좋아요 수 표시**
   - 좋아요 수를 Bold로 표시
   - "좋아요 1,234개" 형식
   - `onLikeChange` 콜백으로 실시간 업데이트

4. **상태 동기화**
   - LikeButton의 상태 변경 시 PostCard의 `post` 상태 업데이트
   - 또는 부모 컴포넌트(PostFeed)에서 상태 관리

**코드 구조:**
```typescript
'use client';

import { useState, useRef } from 'react';
import Image from 'next/image';
import Link from 'next/link';
import { MessageCircle, Send, Bookmark, MoreHorizontal } from 'lucide-react';
import { Button } from '@/components/ui/button';
import LikeButton from './LikeButton';
import { formatRelativeTime } from '@/lib/utils/time';
import type { PostWithUser } from '@/lib/types';

interface PostCardProps {
  post: PostWithUser;
  currentUserId?: string;
  onLikeChange?: (postId: string, liked: boolean, newCount: number) => void;
}

export default function PostCard({ post, currentUserId, onLikeChange }: PostCardProps) {
  const [currentPost, setCurrentPost] = useState(post);
  const lastTapRef = useRef<number>(0);
  const likeButtonRef = useRef<{ handleDoubleTap: () => void } | null>(null);

  const handleDoubleTap = () => {
    const now = Date.now();
    const DOUBLE_TAP_DELAY = 300; // 300ms 내 더블탭

    if (now - lastTapRef.current < DOUBLE_TAP_DELAY) {
      // 더블탭 감지
      likeButtonRef.current?.handleDoubleTap();
    }

    lastTapRef.current = now;
  };

  const handleLikeChange = (liked: boolean, newCount: number) => {
    setCurrentPost({
      ...currentPost,
      is_liked: liked,
      likes_count: newCount,
    });
    onLikeChange?.(currentPost.id, liked, newCount);
  };

  return (
    <article className="bg-card-background border border-border rounded-lg mb-4">
      {/* 헤더 */}
      {/* ... 기존 헤더 코드 ... */}

      {/* 이미지 */}
      <div 
        className="w-full aspect-square relative bg-gray-100"
        onDoubleClick={handleDoubleTap}
      >
        <Image
          src={currentPost.image_url}
          alt={currentPost.caption || '게시물 이미지'}
          fill
          className="object-cover"
          sizes="(max-width: 768px) 100vw, 630px"
          loading="lazy"
        />
        
        {/* 더블탭 애니메이션 오버레이 */}
        {/* LikeButton에서 렌더링되거나 여기서 렌더링 */}
      </div>

      {/* 액션 버튼 */}
      <div className="flex items-center justify-between px-4 py-3 h-[48px]">
        <div className="flex items-center gap-4">
          <LikeButton
            ref={likeButtonRef}
            postId={currentPost.id}
            initialLiked={currentPost.is_liked}
            initialLikesCount={currentPost.likes_count}
            onLikeChange={handleLikeChange}
            size="md"
            enableDoubleTap={true}
          />
          {/* ... 기존 버튼들 ... */}
        </div>
        {/* ... 북마크 버튼 ... */}
      </div>

      {/* 컨텐츠 */}
      <div className="px-4 pb-4 space-y-2">
        {/* 좋아요 수 */}
        {currentPost.likes_count > 0 && (
          <p className="font-bold text-text-primary">
            좋아요 {currentPost.likes_count.toLocaleString()}개
          </p>
        )}
        {/* ... 기존 컨텐츠 ... */}
      </div>
    </article>
  );
}
```

---

## 4. PostFeed 상태 업데이트

### 4.1 `components/post/PostFeed.tsx` 업데이트

**변경 사항:**

1. **좋아요 상태 업데이트 핸들러**
   - PostCard의 `onLikeChange` 콜백 처리
   - `posts` 배열에서 해당 게시물 찾아서 업데이트

2. **상태 동기화**
   - LikeButton의 상태 변경 시 PostFeed의 `posts` 상태 업데이트
   - 다른 PostCard에도 동일한 게시물이 있으면 동기화

**코드 구조:**
```typescript
const handleLikeChange = useCallback((postId: string, liked: boolean, newCount: number) => {
  setPosts((prevPosts) =>
    prevPosts.map((post) =>
      post.id === postId
        ? { ...post, is_liked: liked, likes_count: newCount }
        : post
    )
  );
}, []);

// PostCard에 전달
<PostCard 
  key={post.id} 
  post={post} 
  currentUserId={currentUserId}
  onLikeChange={handleLikeChange}
/>
```

---

## 5. API 호출 유틸리티 함수 (선택적)

### 5.1 `lib/api/likes.ts` 생성 (선택적)

**기능:**
- 좋아요 추가/제거 API 호출 함수
- 에러 처리 및 타입 안정성

**구현:**
```typescript
import type { ApiResponse, Like } from '@/lib/types';

export async function addLike(postId: string): Promise<ApiResponse<Like>> {
  try {
    const response = await fetch('/api/likes', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ post_id: postId }),
    });

    if (!response.ok) {
      const error = await response.json();
      return { data: null, error: error.error || 'Failed to add like' };
    }

    const data = await response.json();
    return { data: data.like, error: null };
  } catch (error) {
    return { data: null, error: 'Network error' };
  }
}

export async function removeLike(postId: string): Promise<ApiResponse<void>> {
  try {
    const response = await fetch('/api/likes', {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ post_id: postId }),
    });

    if (!response.ok) {
      const error = await response.json();
      return { data: null, error: error.error || 'Failed to remove like' };
    }

    return { data: undefined, error: null };
  } catch (error) {
    return { data: null, error: 'Network error' };
  }
}
```

---

## 6. 애니메이션 세부사항

### 6.1 클릭 애니메이션

**CSS:**
```css
.like-button {
  transition: transform 0.15s ease-out;
}

.like-button.animating {
  transform: scale(1.3);
}
```

**타이밍:**
- 시작: 클릭 시 즉시 `scale(1.3)`
- 종료: 150ms 후 `scale(1)`
- 하트 색상 변경: 동시에 발생

### 6.2 더블탭 애니메이션

**CSS:**
```css
.double-tap-heart {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  opacity: 0;
  transition: opacity 0.2s ease-in;
}

.double-tap-heart.visible {
  opacity: 1;
  animation: fadeOut 0.8s ease-out 0.2s forwards;
}

@keyframes fadeOut {
  from {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1.2);
  }
}
```

**타이밍:**
- Fade in: 0.2초
- 유지: 0.2초
- Fade out: 0.8초
- 총 시간: 1초

---

## 7. 작업 순서

1. **API Route 생성** (1단계)
   - `app/api/likes/route.ts` 생성
   - POST 핸들러 구현 (좋아요 추가)
   - DELETE 핸들러 구현 (좋아요 제거)
   - 인증 및 에러 처리
   - 테스트

2. **LikeButton 컴포넌트 생성** (2단계)
   - `components/post/LikeButton.tsx` 생성
   - 기본 UI 구현 (하트 아이콘)
   - 클릭 핸들러 구현
   - 클릭 애니메이션 구현
   - API 호출 통합
   - Optimistic Update 구현

3. **더블탭 기능 구현** (3단계)
   - 더블탭 감지 로직 구현
   - 큰 하트 애니메이션 구현
   - PostCard에 통합

4. **PostCard 통합** (4단계)
   - LikeButton을 PostCard에 추가
   - 좋아요 수 표시 업데이트
   - 상태 동기화

5. **PostFeed 상태 업데이트** (5단계)
   - 좋아요 변경 핸들러 구현
   - 상태 동기화

6. **스타일링 및 다듬기** (6단계)
   - Instagram 디자인에 맞게 스타일 조정
   - 애니메이션 타이밍 조정
   - 반응형 확인

---

## 8. 테스트 체크리스트

- [ ] 좋아요 추가 API 테스트
- [ ] 좋아요 제거 API 테스트
- [ ] 중복 좋아요 방지 테스트
- [ ] 인증 실패 시 에러 처리 테스트
- [ ] LikeButton 클릭 애니메이션 테스트
- [ ] 더블탭 좋아요 테스트
- [ ] 좋아요 수 실시간 업데이트 테스트
- [ ] PostFeed 상태 동기화 테스트
- [ ] 모바일 반응형 테스트
- [ ] 네트워크 에러 시 롤백 테스트

---

## 9. 참고 파일

- [docs/PRD.md](../docs/PRD.md) - 좋아요 기능 정의 (278-283줄, 313-327줄)
- [docs/TODO.md](../docs/TODO.md) - 좋아요 기능 TODO (87-99줄)
- [supabase/migrations/db.sql](../supabase/migrations/db.sql) - likes 테이블 스키마 (63-86줄)
- [lib/types.ts](../lib/types.ts) - TypeScript 타입 정의
- [lib/supabase/server.ts](../lib/supabase/server.ts) - Supabase 서버 클라이언트
- [app/api/posts/route.ts](../app/api/posts/route.ts) - API Route 예시
- [app/api/sync-user/route.ts](../app/api/sync-user/route.ts) - API Route 예시

---

## 10. 주의사항

1. **중복 좋아요 방지**: DB 제약조건 (`UNIQUE(post_id, user_id)`) 활용
2. **Optimistic Update**: 즉시 UI 업데이트 후 API 호출, 실패 시 롤백
3. **애니메이션 성능**: CSS transition 사용, JavaScript 애니메이션 최소화
4. **더블탭 감지**: 타이밍 임계값 (300ms) 조정 가능
5. **에러 처리**: 사용자에게 친화적인 에러 메시지 표시
6. **타입 안정성**: TypeScript 타입 정의 준수

---

## 11. 예상 소요 시간

- API Route 생성: 1-2시간
- LikeButton 컴포넌트: 2-3시간
- 더블탭 기능: 1-2시간
- PostCard 통합: 1시간
- 테스트 및 디버깅: 1-2시간

**총 예상 시간: 6-10시간**

